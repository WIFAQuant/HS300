# æ²ªæ·±300æŒ‡æ•°çº¯å› å­ç»„åˆæ„å»º

> WIFAé‡åŒ–ç»„ï¼Œ2019å¹´æ˜¥ã€‚

ä¾æ®å¤šå› å­æ¨¡å‹ï¼Œå°è¯•å¯¹æ²ªæ·±300æŒ‡æ•°æ„å»ºçº¯å› å­ç»„åˆã€‚

# Step 1ï¼šå› å­æ•°æ®åº“æ„å»º

å› å­æ•°æ®åˆ†ä¸º**é£æ ¼å› å­**å’Œ**é£é™©å› å­**ã€‚

å…¶ä¸­é£æ ¼å› å­åˆåˆ†ä¸ºå¤§ç±»å› å­å’Œç»†åˆ†ç±»å› å­ï¼Œæœ€ç»ˆé£æ ¼å› å­ä¼šç”±ç»†åˆ†ç±»å› å­åˆæˆã€‚

é£æ ¼å› å­å…±é€‰å–ä»¥ä¸‹7ä¸ªå¤§ç±»ä¸­çš„19ä¸ªå› å­ï¼š

- VALUEï¼šEPS_TTM/Pã€BPS_LR/Pã€CFPS_TTM/Pã€SP_TTM/P 
- GROWTHï¼šNetProfit_SQ_YOYã€Sales_SQ_YOYã€ROE_SQ_YOY 
- PROFITï¼šROE_TTMã€ROA_TTM 
- QUALITYï¼šDebt2Assetã€AssetTurnoverã€InvTurnover 
- MOMENTUMï¼šRet1Mã€Ret3Mã€Ret6M 
- VOLATILITYï¼šRealizedVol_3Mã€RealizedVol_6M 
- LIQUIDITYï¼šTurnover_ave_1Mã€Turnover_ave_3M 

é£é™©å› å­é€‰å–ä»¥ä¸‹2ä¸ªå¤§ç±»ä¸­çš„2ä¸ªå› å­ï¼š

- INDUSTRYï¼šä¸­ä¿¡ä¸€çº§è¡Œä¸š 
- SIZEï¼šLn_MarketValue 

ç”±äºæ•°æ®é™åˆ¶å’Œå¹³å°é€‰æ‹©ï¼Œæœ€ç»ˆç¡®å®šçš„å› å­å’Œæœ€åˆé€‰å–çš„å› å­æ¯”è¾ƒå¦‚ä¸‹ï¼š

æœ€åˆé€‰å–å› å­|æœ€ç»ˆç¡®å®šå› å­
:--:|:--:
EPS_TTM/P|PE_TTM
BPS_LR/P|PB_LYR
CFPS_TTM/P|PCF_NCF_TTM
SP_TTM/P|PS_TTM
NetProfit_SQ_YOY|YOYPROFIT
Sales_SQ_YOY|YOY_OR
ROE_SQ_YOY|YOYROE
ROE_TTM|ROE_TTM
ROA_TTM|ROA_TTM
Debt2Asset|DEBTTOASSETS
AssetTurnover|ASSETSTURN
InvTurnover|INVTURN
Ret1M|PCT_CHG
Ret3M|PCT_CHG
Ret6M|PCT_CHG
RealizedVol_3M|UNDERLYINGHISVOL_90D
RealizedVol_6M|UNDERLYINGHISVOL_90D
Turnover_ave_1M|TECH_TURNOVERRATE20
Turnover_ave_3M|TECH_TURNOVERRATE60
ä¸­ä¿¡ä¸€çº§è¡Œä¸šåˆ—è¡¨|INDUSTRY_SW
Ln_MarketValue|VAL_LNMV

> æ•°æ®æ¥æºä¸ºä¸‡å¾·é‡‘èæ•°æ®åº“ï¼Œé€šè¿‡WindPy APIè·å–ã€‚
>
> è·å–ä¸å­˜å‚¨æ•°æ®çš„ä»£ç è¯¦è§â€œH3 Data Processing/Data Fetching and Storing.pyâ€ æ–‡ä»¶ã€‚
> 
> å…¶ä¸­â€œæœ€ç»ˆç¡®å®šå› å­â€åˆ—å³ä¸ºå…¶ä¸‡å¾·æŒ‡æ ‡å­—æ®µåã€‚
>
> æ•°æ®ä¿å­˜åœ¨â€œH3 Dataâ€ ("HS300 Data" çš„ç¼©å†™) æ–‡ä»¶å¤¹ä¸­ï¼Œæ ¼å¼ä¸ºCSVï¼Œç›´æ¥ç”¨å…¨å°å†™çš„ä¸‡å¾·æŒ‡æ ‡åå‘½åã€‚
> å³ "<ä¸‡å¾·æŒ‡æ ‡å>.csv"ï¼Œå¦‚ "pe_ttm.csv"
> 
> æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š
> è¡Œ/åˆ— | è‚¡ç¥¨ä»£å·ï¼ˆ000001.SZï¼‰
>  :--|--:
>  äº¤æ˜“æ—¥æœŸï¼ˆYYYYMMDDï¼‰ | ç›¸åº”å› å­æš´éœ²


# Step 2ï¼šå› å­æ•°æ®å¤„ç†

> å¯¹å› å­æ•°æ®è¿›è¡Œå¤„ç†ã€‚

å¦‚å›¾ä¸ºä»»å–9ä¸ªå› å­çš„æ²ªæ·±300çš„æš´éœ²æ•°æ®åœ¨2005~2018å¹´åˆ†å¸ƒç»Ÿè®¡å›¾ã€‚ğŸ‘‡

![overview.png](https://storage.live.com/items/A3FA4B9C0717EA26!53613?authkey=AH5Re-C6ttiO_oc)

ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºç»å¤§å¤šæ•°å› å­éƒ½å­˜åœ¨æå·®è¿‡å¤§ã€åˆ†å¸ƒä¸å‡çš„ç°è±¡ã€‚
è€Œè¿‡å¤§æˆ–è¿‡å°çš„æ•°æ®ä¼šå½±å“åˆ°ç»Ÿè®¡åˆ†æçš„ç»“æœï¼Œæ‰€ä»¥éœ€è¦å¯¹ç¦»ç¾¤å€¼å’Œæå€¼è¿›è¡Œå¤„ç†ã€‚

## 2.1 å»æå€¼

å»æå€¼çš„æ–¹æ³•é‡‡ç”¨è°ƒæ•´å› å­å€¼ä¸­çš„ç¦»ç¾¤å€¼è‡³æŒ‡å®šé˜ˆå€¼çš„ä¸Šä¸‹é™ï¼Œä»è€Œå‡å°ç¦»ç¾¤å€¼å¯¹ç»Ÿè®¡çš„åå·®ã€‚

ç¦»ç¾¤å€¼çš„é˜ˆå€¼ä¸Šä¸‹é™å®šä¹‰çš„æ–¹æ³•ä¸»è¦æœ‰ä¸‰ç§ï¼š

1. MADæ³•
2. 3Ïƒæ³•
3. ç™¾åˆ†ä½æ³•

### 2.1.1 MADæ³• (Median Absolute Deviation)

å–å› å­çš„ä¸­ä½æ•°ï¼ŒåŠ å‡æ¯ä¸ªå› å­ä¸è¯¥ä¸­ä½æ•°çš„ç»å¯¹åå·®å€¼çš„ä¸­ä½æ•°ä¹˜ä¸Šç»™å®šå‚æ•°ï¼ˆæ­¤å¤„ç»è¿‡è°ƒå‚è®¾å®šé»˜è®¤ä¸º100å€ï¼‰å¾—åˆ°ä¸Šä¸‹é˜ˆå€¼ã€‚

ç»è¿‡MADæ³•å»æå€¼åçš„å› å­æ•°æ®æ¦‚è§ˆå¦‚ä¸‹ï¼š

![MAD.png](https://storage.live.com/items/A3FA4B9C0717EA26!53689?authkey=AH5Re-C6ttiO_oc)

### 2.1.2 3Ïƒæ³•

å–æ‰€æœ‰å› å­æ•°æ®çš„æ ‡å‡†å·®ï¼ˆå³Ïƒï¼‰ï¼Œåç¦»å¹³å‡å€¼ç»™å®šå‚æ•°ï¼ˆæ­¤å¤„é»˜è®¤ä¸ºä¸‰å€ï¼‰æ ‡å‡†å·®å¤„è®¾ä¸ºä¸Šä¸‹é˜ˆå€¼ã€‚

ç»è¿‡3Ïƒæ³•å»æå€¼åçš„å› å­æ•°æ®æ¦‚è§ˆå¦‚ä¸‹ï¼š

![3Ïƒ.png](https://storage.live.com/items/A3FA4B9C0717EA26!53690?authkey=AH5Re-C6ttiO_oc)

### 2.1.3 ç™¾åˆ†ä½æ³•

å–ç»™å®šç™¾åˆ†ä½ä½œä¸ºä¸Šä¸‹é˜ˆå€¼ã€‚ï¼ˆæ­¤å¤„ç»è¿‡è°ƒå‚è®¾å®šä¸ºä¸‹é™1.5%ï¼Œä¸Šé™98.5%åˆ†ä½ç‚¹ï¼‰

ç»è¿‡ç™¾åˆ†ä½æ³•å»æå€¼åçš„å› å­æ•°æ®æ¦‚è§ˆå¦‚ä¸‹ï¼š

![percentile.png](https://storage.live.com/items/A3FA4B9C0717EA26!53691?authkey=AH5Re-C6ttiO_oc)

### 2.1.4 å»æå€¼ç ”ç©¶ã€‚

å®é™…ä¸Šï¼Œå³ä½¿ç»è¿‡è°ƒå‚å°½å¯èƒ½åœ°ä½¿ä¸‰ç§ä¸»æµçš„å»æå€¼æ–¹æ³•çš„ç»“æœäº’ç›¸æ¥è¿‘ï¼Œå¹¶ä¸è‡³äºå‡ºç°è¿‡äºé›†ä¸­çš„é˜ˆå€¼ï¼Œä»ç„¶æœ‰å¯èƒ½å‡ºç°éå¸¸æ˜¾è‘—ä¸åŒçš„æ•ˆæœã€‚

ä»¥æ¯è‚¡ç°é‡‘æµä¸ºä¾‹ï¼Œå°†åŸå§‹æ•°æ®å’Œä¸‰ç§å»æå€¼çš„æ–¹æ³•å¤„ç†åçš„å› å­æ•°æ®æ”¾åœ¨åŒä¸€å¼ å›¾é‡Œï¼Œç”±äºå€¼åŸŸç›¸å·®å¤ªå¤§ï¼Œç”šè‡³æ ¹æœ¬æ— æ³•ä»å›¾ä¸­æ‰¾åˆ°ä¸åŒçš„æ–¹æ³•å¯¹åº”çš„å›¾è¡¨ã€‚ï¼ˆå¦‚ä¸‹å›¾ï¼šåˆ†åˆ«é‡‡ç”¨ä¸‰ç§å»æå€¼æ–¹æ³•å¤„ç†åçš„æ¯è‚¡ç°é‡‘æµæ•°æ®ä¸å…¶åŸå§‹æ•°æ®å›¾ğŸ‘‡ï¼‰

![Comparison(pcf_ncf_ttm).png](https://i.loli.net/2019/02/24/5c7215995823d.png)

ç©¶å…¶åŸå› ï¼Œæ˜¯å…¶åŸå§‹æ•°æ®çš„é›†ä¸­åº¦å°±éå¸¸é«˜ï¼Œä»¥è‡³äºä¸åŒæ–¹æ³•å»æå€¼è®¡ç®—å‡ºç›¸å·®ç”šè¿œçš„é˜ˆå€¼ã€‚ï¼ˆå¦‚ä¸‹å›¾ï¼šå…¨éƒ¨Aè‚¡æ ·æœ¬æœŸå†…æ¯è‚¡ç°é‡‘æµçš„å¯†åº¦åˆ†å¸ƒå›¾ğŸ‘‡ï¼‰

![original pcf_ncf_ttm.png](https://storage.live.com/items/A3FA4B9C0717EA26!53692?authkey=AH5Re-C6ttiO_oc)

æ‰€ä»¥ç»è¿‡ç™¾åˆ†ä½å»æå€¼åï¼Œå°½ç®¡å€¼åŸŸç¼©å°äº†è¿‘6000å€ï¼Œä½†ä»ç„¶éå¸¸é›†ä¸­ã€‚

å¦å¤–ï¼Œè¿™ç§ç¦»å·®è¿‡å¤§çš„æ•°æ®å»æå€¼çš„æ—¶å€™è¿˜ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼šé€ æˆé˜ˆå€¼éƒ¨åˆ†å‡ºç°å¼‚å¸¸é«˜çš„â€œè™šå‡â€æ•°æ®ï¼Œè€Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¸æ„¿æ„çœ‹åˆ°çš„ã€‚ï¼ˆå¦‚ä¸‹å›¾ï¼šæ¯è‚¡ç°é‡‘æµç»è¿‡çº¦æŸæœ€ä¸¥æ ¼çš„ç™¾åˆ†ä½å»æå€¼å¤„ç†åçš„åˆ†å¸ƒå›¾ğŸ‘‡ï¼‰

![percentile filter pcf_ncf_ttm.png](https://storage.live.com/items/A3FA4B9C0717EA26!53693?authkey=AH5Re-C6ttiO_oc)

> æ³¨æ„å›¾ä¸­ [-1000, 1000] å¤„å¼‚å¸¸çš„â€œçªèµ·â€ã€‚
> 
> è¿™æ˜¯ç”±äºè¿‡å¤šè¶…å‡ºä¸Šä¸‹é˜ˆå€¼çš„æ•°æ®è¢«è¿«è°ƒæ•´ä¸ºä¸Šä¸‹é˜ˆå€¼ï¼Œå¯¼è‡´é˜ˆå€¼å¤„çš„æ•°æ®åˆ†å¸ƒç‰¹åˆ«å¯†é›†ã€‚

ä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ˆæ•°æ®åˆ†å¸ƒç›¸å¯¹å‡åŒ€æ—¶ï¼Œæ­¤å¤„ä»¥ROEä¸ºä¾‹ï¼‰ï¼Œå„ç§æ–¹æ³•ä¸åŸå§‹æ•°æ®ç›¸å·®ä¸å¤§ã€‚ï¼ˆå¦‚ä¸‹å›¾ï¼šROEæ•°æ®çš„åŸå§‹æ•°æ®åŠåˆ†åˆ«ç»è¿‡ä¸‰ç§å»æå€¼æ–¹æ³•å¤„ç†åçš„åˆ†å¸ƒå›¾ğŸ‘‡ï¼‰

![Comparison(roe_ttm).png](https://i.loli.net/2019/02/24/5c72160804bbb.png)

ç»è¿‡æ¯”è¾ƒç ”ç©¶ï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰å–å‚æ•°å€¼ä¸º100çš„MADæ³•è¿›è¡Œå»æå€¼å¤„ç†ã€‚

> å»æå€¼æ•°æ®å¤„ç†çš„ä»£ç è¯¦è§â€œH3 Data Processing/Data Filtering.pyâ€ æ–‡ä»¶ã€‚

## 2.2 å¡«è¡¥ç¼ºå¤±å€¼

